<!DOCTYPE html>
<html>
<head>
  <title>E-certification</title>
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="overlay">
    <div class="design"></div>
  </div>
  <header class="header">
    <div class="logo">
      <span>e-cert </span>
    </div>
    <nav class="nav-bar">
      <ul>
        <li class="nav-link"><a href="/">Home</a></li>
        <li class="nav-link"><a href="/assets/get certificate.html">Get certificate</a></li>
        <li class="nav-link"><a href="/assets/register course.html">Get a Course</a></li>
        <li class="btn nav-link"><a href="/login and sign-up.html">Sign In</a></li>
      </ul>
    </nav>
  </header>
  <div class="landing">
    <div>
      <div>
        Login
        <form method="POST" action="/auth/login" name="login">
          <input type="email" name="email" placeholder="email">
          <input type="password" name="password" placeholder="password">
          <input type="submit"/>
        </form>
      </div>
      <div>
        Register
        <form method="POST" action="/auth/register" name="register">
          <div>
            <input
              type="firstname"
              name="firstname"
              placeholder="firstname"
              required
            />
          </div>
          <div>
            <input
              type="text"
              name="lastname"
              placeholder="lastname"
              required
            />
          </div>
          <div>
            <input
              type="text"
              name="otherNames"
              placeholder="otherNames"
            />
          </div>
          <select name="gender" required>
            <option value="M">Male</option>
            <option value="F">Female</option>
          </select>
          <div>
            <input
              type="email"
              name="email"
              placeholder="email"
              required
            />
          </div>
          <div>
            <input
              type="password"
              name="password"
              placeholder="password" 
              required>
          </div>
          <input type="submit"/>
        </form>
      </div>
    </div>    
  </div>
  <div class="content">
    <a href="" hidden id="link"></a>
  </div>
  <footer class="footer">
    <div style="text-align: center;">
      e-certificate
    </div>
    <div style="width: 50%">
      <ul>
        <li>Something</li>
        <li>Another thing</li>
        <li>Something else</li>
        <li>The first thing</li>
      </ul>
    </div>
    <div class="design-1"></div>
  </footer>
  <script type="text/javascript">
    // login
    document.login.onsubmit = event=>{
      event.preventDefault();
      let { target } = event;
      let { elements } = target;
      let reqBody = {}
      for (let i = 0; i < elements.length; i++) {
        if (elements.item(i).name) {
          reqBody[elements.item(i).name] = elements.item(i).value
        }else{
          continue;
        }
      }
      fetch(target.action,
        {
          headers: {
            'Content-Type': 'application/json;charset=utf-8'
          },
          body: JSON.stringify(reqBody),
          method: "POST"
        }
      )
        .then(res=>res.json())
        .then(info=>{
          if (info.success) {
            let link = document.getElementById('link')
            link.src = "/assets/register course.html";
            // link.click()
            location = "/assets/register course.html";
          }
        })
        .catch(console.log)
    }
  </script>
  <script type="text/javascript">
    // register
    document.register.onsubmit = event=>{
      event.preventDefault();
      let { target } = event;
      let { elements } = target;
      let reqBody = {}
      for (let i = 0; i < elements.length; i++) {
        if (elements.item(i).name) {
          reqBody[elements.item(i).name] = elements.item(i).value
        }else{
          continue;
        }
      }
      fetch(target.action,
        {
          headers: {
            'Content-Type': 'application/json;charset=utf-8'
          },
          body: JSON.stringify(reqBody),
          method: "POST"
        }
      )
        .then(res=>res.json())
        .then(info=>{
          if (info.success) {
            let link = document.getElementById('link')
            link.src = "/assets/register course.html";
            // link.click()
            location = "/assets/register course.html";
          }
        })
        .catch(console.log)
    }
  </script>
</body>
</html>