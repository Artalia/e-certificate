<!DOCTYPE html>
<html>
<head>
  <title>E-certification</title>
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <!-- <br>
  <a href="/verify.html">Verify</a><br>
  <br>
  <br> -->
  <div class="overlay">
    <div class="design"></div>
  </div>
  <header class="header">
    <div class="logo">
      <span>e-cert </span>
    </div>
    <nav class="nav-bar">
      <ul>
        <li class="nav-link"><a href="/">Home</a></li>
        <li class="nav-link"><a href="/assets/get certificate.html">Get certificate</a></li>
        <li class="nav-link"><a href="/assets/register course.html">Get a Course</a></li>
        <li class="btn nav-link"><a href="/login and sign-up.html">Sign In</a></li>
      </ul>
    </nav>
  </header>
  <div class="landing">
    <main>
      Register for a course
    </main>
  </div>
  <div class="content">
    <form method="POST" action="/user/course" name="register course">
      <select name="courseCode" required>
        <option selected disabled>Select a course</option>
        <option value="DM">Digital Marketing</option>
        <option value="GD">Graphics Design</option>
        <option value="PR">Programming</option>
        <option value="WD">Web Development</option>
      </select>

      <select name="courseDuration" required>
        <option value="6 months">6 months</option>
        <option value="3 months">3 months</option>
      </select>
      <input type="submit">
    </form>
    <p  id="regInfo"></p>
  </div>
  <footer class="footer">
    <div style="text-align: center;">
      e-certificate
    </div>
    <div style="width: 50%">
      <ul>
        <li>Something</li>
        <li>Another thing</li>
        <li>Something else</li>
        <li>The first thing</li>
      </ul>
    </div>
    <div class="design-1"></div>
  </footer>
    <script type="text/javascript">
    // register
    document["register course"].onsubmit = event=>{
      event.preventDefault();
      let { target } = event;
      let { elements } = target;
      let reqBody = {}
      for (let i = 0; i < elements.length; i++) {
        if (elements.item(i).name) {
          reqBody[elements.item(i).name] = elements.item(i).value
        }else{
          continue;
        }
      }
      fetch(target.action,
        {
          headers: {
            'Content-Type': 'application/json;charset=utf-8'
          },
          body: JSON.stringify(reqBody),
          method: "POST"
        }
      )
        .then(res=>res.json())
        .then(info=>{
          let { data, success } = info;
          if (info.success) {
            let regInfo = document.getElementById('regInfo')
            regInfo.innerText = "you have successfully registered your course";
            console.log(data);
          }
        })
        .catch(err=>{
          regInfo.innerText = "A something went wrong \n registeration was no successful";
          console.log(err);
        })
    }
  </script>
</body>
</html>